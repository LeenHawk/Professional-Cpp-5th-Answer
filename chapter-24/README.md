# Chapter-24 其他库工具

## 24-1

第 14 章解释了 C++ 中的错误处理，并解释了这里基本上有两个主要选项，要么使用错误码，要么使用异常。建议使用异常进行错误处理，但在本练习中，你将使用错误码。编写一个简单的 Error 类，它只存储单个消息，有一个构造函数来设置消息，有一个 getter 来获取消息。编写一个参数名为 fail 的 getData() 函数。如果 fail 为 false ，则函数返回数据的 vector，否则，返回 Error 的实例。不允许使用非 const 输出参数的引用。在 main() 函数中测试你的实现。

## 24-2

大多数命令行应用程序接收命令行参数。在本书的大部分示例代码中， main 函数就是 main() 。然而 main() 也可以接收参数：main\(int argc,char\*\* argv\)，其中 argc 是命令行参数的数量，argv 是一个字符串数组，每个参数对应一个字符串。本习题假设命令行参数的形式为 name=value。编写一个函数，它可以解析单个参数并返回一个包含参数名称和 variant 的 pair。如果 variant 的值可以被解析为布尔值，则作为布尔值。如果该值被解析为整数，则为整数，否则为字符串。要拆分 name=value 字符串，可以使用正则表达式（参见第 21 章）。要解析整数，可以使用第 2 章介绍的某个函数。在 main() 函数中，循环所有命令行参数并解析它们，使用 holds_altemative() 将解析后的结果输出到标准输出上。

## 24-3

修改习题24-2的答案，不要使用 holds_alternative()，使用一个访问者将解析后的结果输出到标准输出上。

## 24-4

修改习题24·3的答案，使用 tuple 替换 pair。
